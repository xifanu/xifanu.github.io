<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>IntelliJ IDEA快捷键</title>
    <url>/2018/01/30/IntelliJ-IDEA-Combined/</url>
    <content><![CDATA[<blockquote>
<p>Ctrl + Alt + h：显示调用当前方法的所有位置,被调用</p>
<p>Ctrl + Alt + v：自动生成返回值</p>
<p>Shift + Shift  ( Search Everywhere )：查找类  </p>
<p>Ctrl + Shift + Alt + N ：查找类</p>
</blockquote>
<a id="more"></a>

]]></content>
      <tags>
        <tag>idea</tag>
        <tag>快捷键</tag>
      </tags>
  </entry>
  <entry>
    <title>java.net.SocketException:Connection reset原因</title>
    <url>/2018/01/02/SocketException/</url>
    <content><![CDATA[<blockquote>
<p>1，如果一端的Socket被关闭（或主动关闭，或因为异常退出而 引起的关闭），另一端仍发送数据，发送的第一个数据包引发该异常(Connect reset by peer);</p>
<p>2，一端退出，但退出时并未关闭该连接，另一端如果在从连接中读数据则抛出该异常（Connection reset）</p>
</blockquote>
<p>　　简单的说就是在连接断开后的读和写操作引起的。</p>
<h4 id="顺便复习一下TCP的三次握手"><a href="#顺便复习一下TCP的三次握手" class="headerlink" title="顺便复习一下TCP的三次握手"></a>顺便复习一下TCP的三次握手</h4><a id="more"></a>
<p>　　TCP建立连接时需要三次握手，在释放连接需要四次挥手；例如三次握手的过程如下：</p>
<blockquote>
<ol>
<li><p>第一次握手：客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；</p>
</li>
<li><p>第二次握手：服务器收到syn包，并会确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；</p>
</li>
<li><p>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p>
</li>
</ol>
</blockquote>
<p>　　可以看到握手时会在客户端和服务器之间传递一些TCP头信息，比如ACK标志、SYN标志以及挥手时的FIN标志等。</p>
<p>　　除了以上这些常见的标志头信息，还有另外一些标志头信息，比如推标志PSH、复位标志RST等。其中复位标志RST的作用就是“复位相应的TCP连接”。</p>
<p><font color=#DC143C>　　TCP连接和释放时还有许多细节，比如半连接状态、半关闭状态等。详情请参考这方面的巨著《TCP/IP详解》和《UNIX网络编程》。</font></p>
]]></content>
      <tags>
        <tag>SocketException</tag>
        <tag>Connection reset</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVA利用JNative调用DLL、ocx动态链接库</title>
    <url>/2018/02/01/Java-JNative/</url>
    <content><![CDATA[<h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1.环境"></a>1.环境</h2><blockquote>
<p>OS：Windows 10 1709 x64<br>IDE：eclipse x86<br>Jdk：jdk 6 x86</p>
</blockquote>
<a id="more"></a>
<h2 id="2-代码"><a href="#2-代码" class="headerlink" title="2.代码"></a>2.代码</h2><h3 id="2-1-JAVA调用方式"><a href="#2-1-JAVA调用方式" class="headerlink" title="2.1 JAVA调用方式"></a>2.1 JAVA调用方式</h3><p><code>ActiveX组件文件名：NISEC_SKSC.dll</code><br><code>函数定义：void _stdcall PostAndRecvEx(IN char* pszPost, OUT char* pszRecv)</code><br><code>参数：pszPost输入XML信息，pszRecv返回XML信息</code><br><code>返回值:无</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getServerResult</span><span class="params">(String xmlcontent, Object... objs)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">"log输入为======"</span> + xmlcontent);</span><br><span class="line">    Pointer pIn = <span class="keyword">null</span>;</span><br><span class="line">    Pointer pOut = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 加载动态库及函数</span></span><br><span class="line">      JNative jnPKServer = <span class="keyword">new</span> JNative(<span class="string">"NISEC_SKSC"</span>,<span class="string">"PostAndRecvEx"</span>);</span><br><span class="line">      <span class="comment">//“NISEC_SKSC”为dll文件名,“PostAndRecvEx”为函数名</span></span><br><span class="line">      <span class="keyword">byte</span>[] bytes = (xmlcontent + <span class="string">'\0'</span>).getBytes();</span><br><span class="line">      pIn = Pointer.createPointer(bytes.length);</span><br><span class="line">      <span class="comment">// 设置传入参数</span></span><br><span class="line">      pIn.setMemory(bytes);</span><br><span class="line">      jnPKServer.setParameter(<span class="number">0</span>, pIn);</span><br><span class="line">      <span class="comment">// 处理传出参数</span></span><br><span class="line">      <span class="keyword">if</span> (objs != <span class="keyword">null</span> &amp;&amp; objs.length == <span class="number">1</span> &amp;&amp; objs[<span class="number">0</span>] <span class="keyword">instanceof</span> Number) &#123;</span><br><span class="line">        pOut = Pointer.createPointer(((Number) objs[<span class="number">0</span>]).intValue());</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pOut = Pointer.createPointer(<span class="number">1000000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      jnPKServer.setParameter(<span class="number">1</span>, pOut);</span><br><span class="line">      <span class="comment">// 执行调用</span></span><br><span class="line">      jnPKServer.invoke();</span><br><span class="line">      String bak = pOut.getAsString();</span><br><span class="line">      log.info(<span class="string">"log输出为======"</span> + bak);</span><br><span class="line">      <span class="keyword">return</span> bak;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      log.error(<span class="string">"Jnative遇到错误"</span>, e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pIn != <span class="keyword">null</span>) &#123;</span><br><span class="line">          pIn.dispose();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pOut != <span class="keyword">null</span>) &#123;</span><br><span class="line">          pOut.dispose();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (NativeException e) &#123;</span><br><span class="line">        log.error(<span class="string">"Jnative遇到错误"</span>, e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-ActiveX调用方式"><a href="#2-2-ActiveX调用方式" class="headerlink" title="2.2 ActiveX调用方式"></a>2.2 ActiveX调用方式</h3><p><code>ActiveX组件文件名：NISEC_SKSCX.ocx</code><br><code>ActiveX组件GUID：&lt;OBJECT ID=sk CLASSID=&quot;clsid: 003BD8F2-A6C3-48EF-9B72-ECFD8FC4D49F&quot;&gt;&lt;/OBJECT&gt;</code><br><code>函数定义：Operate(string sInputInfo);</code><br><code>参数： sInputInfo   输入字符串信息</code><br><code>返回值：返回结果字符串</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ActiveX组件调用示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">OBJECT</span> <span class="attr">ID</span>=<span class="string">sk</span> <span class="attr">CLASSID</span>=<span class="string">"clsid:003BD8F2-A6C3-48EF-9B72-ECFD8FC4D49F"</span> <span class="attr">codebase</span>=<span class="string">"NISEC_SKSCX.ocx#version=1,0,0,1"</span>&gt;</span><span class="tag">&lt;/<span class="name">OBJECT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">SetParameter</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        var sInputInfo = "<span class="meta">&lt;?xml version=\"1.0\" encoding=\"gbk\"?&gt;</span>\r\n<span class="tag">&lt;<span class="name">business</span> <span class="attr">id</span>=<span class="string">\</span>"<span class="attr">20001</span>\" <span class="attr">comment</span>=<span class="string">\</span>"参数设置\"&gt;</span>\r\n<span class="tag">&lt;<span class="name">body</span> <span class="attr">yylxdm</span>=<span class="string">\</span>"<span class="attr">1</span>\"&gt;</span>\r\n<span class="tag">&lt;<span class="name">servletip</span>&gt;</span>192.168.0.1<span class="tag">&lt;/<span class="name">servletip</span>&gt;</span>\r\n<span class="tag">&lt;<span class="name">servletport</span>&gt;</span>7001<span class="tag">&lt;/<span class="name">servletport</span>&gt;</span>\r\n<span class="tag">&lt;<span class="name">keypwd</span>&gt;</span>00000000<span class="tag">&lt;/<span class="name">keypwd</span>&gt;</span>\r\n<span class="tag">&lt;/<span class="name">body</span>&gt;</span>\r\n<span class="tag">&lt;/<span class="name">business</span>&gt;</span>";</span></span></span><br><span class="line">        alert(sInputInfo);</span><br><span class="line"><span class="actionscript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line">          ret = sk.Operate(sInputInfo);</span><br><span class="line">          alert(ret);</span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">catch</span>(e) &#123;</span></span><br><span class="line"><span class="actionscript">          alert(e.message + <span class="string">",errno:"</span> + e.number);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">      <span class="function"><span class="keyword">function</span> <span class="title">KeyQuery</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        var sInputInfo = "<span class="meta">&lt;?xml version=\"1.0\" encoding=\"gbk\"?&gt;</span>\r\n<span class="tag">&lt;<span class="name">business</span> <span class="attr">id</span>=<span class="string">\</span>"<span class="attr">20002</span>\" <span class="attr">comment</span>=<span class="string">\</span>"税控钥匙信息查询\"&gt;</span>\r\n<span class="tag">&lt;<span class="name">body</span> <span class="attr">yylxdm</span>=<span class="string">\</span>"<span class="attr">1</span>\"&gt;</span>\r\n<span class="tag">&lt;<span class="name">keypwd</span>&gt;</span>00000000<span class="tag">&lt;/<span class="name">keypwd</span>&gt;</span>\r\n<span class="tag">&lt;/<span class="name">body</span>&gt;</span>\r\n<span class="tag">&lt;/<span class="name">business</span>&gt;</span>";</span></span></span><br><span class="line">        alert(sInputInfo);</span><br><span class="line"><span class="actionscript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line">          ret = sk.Operate(sInputInfo);</span><br><span class="line">          alert(ret);</span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">catch</span>(e) &#123;</span></span><br><span class="line"><span class="actionscript">          alert(e.message + <span class="string">",errno:"</span> + e.number);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">#f0f0ff</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">formData</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">2</span> <span class="attr">cellspacing</span>=<span class="string">0</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">caption</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">6</span> <span class="attr">color</span>=<span class="string">#0000ff</span>&gt;</span>ActiveX组件调用示例<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span> <span class="attr">height</span>=<span class="string">50</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"参数设置"</span> <span class="attr">onclick</span>=<span class="string">"SetParameter();"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"税控钥匙信息查询"</span> <span class="attr">onclick</span>=<span class="string">"KeyQuery();"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>JNative.jar文件可以自行百度进行下载…</strong></p>
]]></content>
      <tags>
        <tag>java</tag>
        <tag>JNative</tag>
        <tag>dll</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipse安装JD-gui反编译插件</title>
    <url>/2018/01/08/eclipse-install-JDGUI/</url>
    <content><![CDATA[<h2 id="1-环境"><a href="#1-环境" class="headerlink" title="1.环境"></a>1.环境</h2><blockquote>
<p>OS：Windows 10 1709 x64<br>IDE：eclipse x86<br>Jdk：jdk 6 x86</p>
</blockquote>
<a id="more"></a>
<h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h2><h3 id="2-1-在线安装jd-gui"><a href="#2-1-在线安装jd-gui" class="headerlink" title="2.1 在线安装jd-gui"></a>2.1 在线安装jd-gui</h3><p>　　eclipse菜单栏的help –&gt; Install New Software，在新弹出的“install”窗口中点击“Add”，<br>　　Name：<code>JD-eclipse_update_site</code><br>　　Location：<code>http://jd.benow.ca/jd-eclipse/update</code><br>　　<div align="center"><img src="https://xifanu-1253480637.cos.ap-beijing.myqcloud.com/blog.xifanu/2018/01/img/jd-gui-installed.png" width = "500" height = auto alt="图" /></div><br>　　<br>点击OK后，耐心等待资源加载完毕，然后点击“select all”，一路next安装，最后重启；</p>
<h3 id="2-2-离线安装jd-gui"><a href="#2-2-离线安装jd-gui" class="headerlink" title="2.2 离线安装jd-gui"></a>2.2 离线安装jd-gui</h3><h4 id="2-2-1-下载离线插件包-4-54MB"><a href="#2-2-1-下载离线插件包-4-54MB" class="headerlink" title="2.2.1 下载离线插件包(4.54MB)"></a>2.2.1 下载离线插件包(4.54MB)</h4><p>　　下载地址：<a href="http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip" target="_blank" rel="noopener">http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip</a><br>　　或：<a href="https://xifanu-1253480637.cos.ap-beijing.myqcloud.com/blog.xifanu/2018/01/file/jdeclipse_update_site.zip" target="_blank" rel="noopener">点此下载</a></p>
<h4 id="2-2-2-解压缩"><a href="#2-2-2-解压缩" class="headerlink" title="2.2.2 解压缩"></a>2.2.2 解压缩</h4><p>　　将下载的压缩包解压，将plugins文件下的jd.ide.eclipse_0.1.5.jar和jd.ide.eclipse.win32.x86_0.1.5.jar复制到eclipse安装目录下的plugins里。<br>　　打开eclipse菜单栏的help –&gt; Install New Software，在新弹出的“install”窗口中点击“Add”，再点击“Local…”，选择刚刚解压过的包的路径，然后点击“OK”，接下来遇到下一步就点击下一步，安装时记得同意协议。</p>
<p>　　<div align="center"><img src="https://xifanu-1253480637.cos.ap-beijing.myqcloud.com/blog.xifanu/2018/01/img/install%20software-jd-jui.png" width = "500" height = auto ></img></div><br>　　<br>　　<code>记得到此步骤之后，要点击“Run in Background”，然后勾选框中的选项，最后点击“OK”，不然可能会卡很久（我反正卡了很久，勾选之后再点OK，分分钟安装成功）</code></p>
<h2 id="3-设置-class文件默认编辑器"><a href="#3-设置-class文件默认编辑器" class="headerlink" title="3 设置*.class文件默认编辑器"></a>3 设置*.class文件默认编辑器</h2><p>　　打开eclipse，点击 “Window –&gt; Preferences”  在输入框输入 “File Associations” ，在右边选”<em>.class”，然后选中下面的“Class File Editor”，点击右边的”Default”设置为默认的即可。<br>　　<div align="center"><img src="https://xifanu-1253480637.cos.ap-beijing.myqcloud.com/blog.xifanu/2018/01/img/class-default.png" width = "500" height = auto ></img></div><br>　　注意，图中含有两个“Class File Editor”，应该是一个32位插件，一个64位插件。如果你将其中一个设置为默认编辑器后，打开</em>.class文件出现如下错误<br>　　 <strong><code>Can&#39;t load AMD 64-bit .dll on a IA 32-bit platform</code></strong><br>　　 解决办法就是设置另外一个“Class File Editor”为默认项即可。</p>
]]></content>
      <tags>
        <tag>eclipse</tag>
        <tag>jd-gui</tag>
        <tag>反编译</tag>
      </tags>
  </entry>
</search>
